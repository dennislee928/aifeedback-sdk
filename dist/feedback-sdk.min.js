!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.FeedbackSDK=e():t.FeedbackSDK=e()}(this,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.toStringTag||"@@toStringTag";function a(n,o,i,c){var a=o&&o.prototype instanceof f?o:f,s=Object.create(a.prototype);return r(s,"_invoke",function(n,r,o){var i,c,a,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,c=0,a=t,l.n=n,u}};function y(n,r){for(c=n,a=r,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,v=i[2];n>3?(o=v===r)&&(a=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(c=0,l.v=r,l.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,l.n=v,c=0))}if(o||n>1)return u;throw p=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,v),c=s,a=v;(e=c<2?t:a)||!p;){i||(c?c<3?(c>1&&(l.n=-1),y(c,a)):l.n=a:l.v=a);try{if(f=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,a)))throw TypeError("iterator result is not an object");if(!e.done)return e;a=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(p=l.n<0)?a:n.call(r,l))!==u)break}catch(e){i=t,c=1,a=e}finally{f=1}}return{value:e,done:p}}}(n,i,c),!0),s}var u={};function f(){}function s(){}function p(){}e=Object.getPrototypeOf;var l=[][i]?e(e([][i]())):(r(e={},i,(function(){return this})),e),y=p.prototype=f.prototype=Object.create(l);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,r(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t}return s.prototype=p,r(y,"constructor",p),r(p,"constructor",s),s.displayName="GeneratorFunction",r(p,c,"GeneratorFunction"),r(y),r(y,c,"Generator"),r(y,i,(function(){return this})),r(y,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:a,m:v}})()}function r(t,e,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}r=function(t,e,n,o){if(e)i?i(t,e,{value:n,enumerable:!o,configurable:!o,writable:!o}):t[e]=n;else{var c=function(e,n){r(t,e,(function(t){return this._invoke(e,n,t)}))};c("next",0),c("throw",1),c("return",2)}},r(t,e,n,o)}function o(t,e,n,r,o,i,c){try{var a=t[i](c),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,o)}function i(t,e){var n=new Error(e);return n.code=t,n}function c(t){return a.apply(this,arguments)}function a(){var t;return t=n().m((function t(e){var r,o,c,a;return n().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,e.json();case 1:r=t.v,t.n=3;break;case 2:t.p=2,t.v,r={};case 3:o=r.message||"Request failed with status ".concat(e.status),c="SERVER_ERROR",a=e.status,t.n=400===a?4:401===a?5:409===a?6:7;break;case 4:return c="INVALID_DATA",t.a(3,7);case 5:return c="UNAUTHORIZED",t.a(3,7);case 6:return c="SUBMISSION_CONFLICT",t.a(3,7);case 7:return t.a(2,i(c,o))}}),t,null,[[0,2]])})),a=function(){var e=this,n=arguments;return new Promise((function(r,i){var c=t.apply(e,n);function a(t){o(c,r,i,a,u,"next",t)}function u(t){o(c,r,i,a,u,"throw",t)}a(void 0)}))},a.apply(this,arguments)}function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}t.d(e,{default:()=>E});var f=["good","normal","bad"];function s(t){if(!t||"object"!==u(t)||Array.isArray(t))return i("INVALID_DATA","feedbackData must be an object.");var e=t.feedbackRating,n=t.feedbackComment,r=t.durationSec;return e&&f.includes(e)?void 0!==n&&("string"!=typeof n||n.length>500)?i("INVALID_DATA","feedbackComment must be a string with a maximum length of ".concat(500," characters.")):void 0!==r&&("number"!=typeof r||r<0)?i("INVALID_DATA","durationSec must be a non-negative number."):null:i("INVALID_DATA","feedbackRating is required and must be one of: ".concat(f.join(", "),"."))}function p(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof a?r:a,f=Object.create(u.prototype);return l(f,"_invoke",function(n,r,o){var i,a,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,a=0,u=t,l.n=n,c}};function y(n,r){for(a=n,u=r,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,v=i[2];n>3?(o=v===r)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(a=0,l.v=r,l.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,l.n=v,a=0))}if(o||n>1)return c;throw p=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,v),a=s,u=v;(e=a<2?t:u)||!p;){i||(a?a<3?(a>1&&(l.n=-1),y(a,u)):l.n=u:l.v=u);try{if(f=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(p=l.n<0)?u:n.call(r,l))!==c)break}catch(e){i=t,a=1,u=e}finally{f=1}}return{value:e,done:p}}}(n,o,i),!0),f}var c={};function a(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(l(e={},r,(function(){return this})),e),y=f.prototype=a.prototype=Object.create(s);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,l(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t}return u.prototype=f,l(y,"constructor",f),l(f,"constructor",u),u.displayName="GeneratorFunction",l(f,o,"GeneratorFunction"),l(y),l(y,o,"Generator"),l(y,r,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),(p=function(){return{w:i,m:v}})()}function l(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}l=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){l(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},l(t,e,n,r)}function y(t,e,n,r,o,i,c){try{var a=t[i](c),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,o)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){y(i,r,o,c,a,"next",t)}function a(t){y(i,r,o,c,a,"throw",t)}c(void 0)}))}}function b(t,e){return d.apply(this,arguments)}function d(){return d=v(p().m((function t(e,n){var r;return p().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("".concat(e,"/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({serviceId:n}),credentials:"include"});case 1:if((r=t.v).ok){t.n=3;break}return t.n=2,c(r);case 2:throw t.v;case 3:return t.a(2)}}),t)}))),d.apply(this,arguments)}function h(t,e){return m.apply(this,arguments)}function m(){return m=v(p().m((function t(e,n){var r;return p().w((function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("".concat(e,"/feedback"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),credentials:"include"});case 1:if((r=t.v).ok){t.n=3;break}return t.n=2,c(r);case 2:throw t.v;case 3:return t.p=3,t.n=4,r.json();case 4:return t.a(2,t.v);case 5:return t.p=5,t.v,t.a(2,{})}}),t,null,[[3,5]])}))),m.apply(this,arguments)}function w(t,e,n){return g.apply(this,arguments)}function g(){return g=v(p().m((function t(e,n,r){var o,c;return p().w((function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,b(e,n);case 1:return t.n=2,h(e,r);case 2:return o=t.v,t.a(2,o);case 3:if(t.p=3,!(c=t.v).code){t.n=4;break}throw c;case 4:throw i("SERVER_ERROR",c.message||"A network error occurred.");case 5:return t.a(2)}}),t,null,[[0,3]])}))),g.apply(this,arguments)}function j(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof a?r:a,f=Object.create(u.prototype);return O(f,"_invoke",function(n,r,o){var i,a,u,f=0,s=o||[],p=!1,l={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,n){return i=e,a=0,u=t,l.n=n,c}};function y(n,r){for(a=n,u=r,e=0;!p&&f&&!o&&e<s.length;e++){var o,i=s[e],y=l.p,v=i[2];n>3?(o=v===r)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=n<2&&y<i[1])?(a=0,l.v=r,l.n=i[1]):y<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,l.n=v,a=0))}if(o||n>1)return c;throw p=!0,r}return function(o,s,v){if(f>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,v),a=s,u=v;(e=a<2?t:u)||!p;){i||(a?a<3?(a>1&&(l.n=-1),y(a,u)):l.n=u:l.v=u);try{if(f=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(p=l.n<0)?u:n.call(r,l))!==c)break}catch(e){i=t,a=1,u=e}finally{f=1}}return{value:e,done:p}}}(n,o,i),!0),f}var c={};function a(){}function u(){}function f(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(O(e={},r,(function(){return this})),e),p=f.prototype=a.prototype=Object.create(s);function l(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,O(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,O(p,"constructor",f),O(f,"constructor",u),u.displayName="GeneratorFunction",O(f,o,"GeneratorFunction"),O(p),O(p,o,"Generator"),O(p,r,(function(){return this})),O(p,"toString",(function(){return"[object Generator]"})),(j=function(){return{w:i,m:l}})()}function O(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}O=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){O(t,e,(function(t){return this._invoke(e,n,t)}))};i("next",0),i("throw",1),i("return",2)}},O(t,e,n,r)}function S(t,e,n,r,o,i,c){try{var a=t[i](c),u=a.value}catch(t){return void n(t)}a.done?e(u):Promise.resolve(u).then(r,o)}var k,T,_=null,P=null;const E={init:function(t){if(!t||!t.serviceId)throw new Error("FeedbackSDK.init(config) requires a config object with a serviceId property.");if(!t.dsn)throw new Error("FeedbackSDK.init(config) requires a config object with a dsn property.");_=t.serviceId,P=t.dsn.endsWith("/")?t.dsn.slice(0,-1):t.dsn},submit:(k=j().m((function t(e){var n;return j().w((function(t){for(;;)switch(t.n){case 0:if(_&&P){t.n=1;break}throw new Error("FeedbackSDK.submit() called before init(). Please call FeedbackSDK.init() first.");case 1:if(!(n=s(e))){t.n=2;break}return t.a(2,Promise.reject(n));case 2:return t.a(2,w(P,_,e))}}),t)})),T=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=k.apply(t,e);function i(t){S(o,n,r,i,c,"next",t)}function c(t){S(o,n,r,i,c,"throw",t)}i(void 0)}))},function(t){return T.apply(this,arguments)})};return e=e.default})()));